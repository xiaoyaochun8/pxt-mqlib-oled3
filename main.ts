namespace mqlib{
    let arrWordBank = [
/* 0 静 */[0x44, 0x54, 0x54, 0x7f, 0x54, 0x54, 0x44, 0x20, 0x28, 0x27, 0xe4, 0x34, 0x2c, 0xe0, 0x00, 0x00, 0x00, 0xff, 0x15, 0x55, 0x95, 0x7f, 0x00, 0x09, 0x49, 0x89, 0x7f, 0x09, 0x09, 0x1f, 0x01, 0x00,],
/* 1 夜 */[0x04, 0x04, 0x84, 0xe4, 0x1c, 0x04, 0x05, 0xc6, 0x3c, 0xa4, 0x24, 0x24, 0xe4, 0x04, 0x04, 0x00, 0x02, 0x01, 0x00, 0xff, 0x00, 0x82, 0x81, 0x46, 0x28, 0x10, 0x29, 0x46, 0x41, 0x80, 0x80, 0x00,],
/* 2 思 */[0x00, 0x00, 0xfe, 0x92, 0x92, 0x92, 0x92, 0xfe, 0x92, 0x92, 0x92, 0x92, 0xfe, 0x00, 0x00, 0x00, 0x40, 0x38, 0x01, 0x00, 0x3c, 0x40, 0x40, 0x42, 0x4c, 0x40, 0x40, 0x70, 0x05, 0x08, 0x30, 0x00,],
/* 3 床 */[0x00, 0x00, 0xfc, 0x04, 0x44, 0x44, 0x44, 0x45, 0xf6, 0x44, 0x44, 0x44, 0x44, 0x44, 0x04, 0x00, 0x40, 0x30, 0x0f, 0x20, 0x10, 0x08, 0x06, 0x01, 0xff, 0x01, 0x06, 0x08, 0x10, 0x20, 0x20, 0x00,],
/* 4 前 */[0x08, 0x08, 0xe8, 0x29, 0x2e, 0x28, 0xe8, 0x08, 0x08, 0xc8, 0x0c, 0x0b, 0xe8, 0x08, 0x08, 0x00, 0x00, 0x00, 0xff, 0x09, 0x49, 0x89, 0x7f, 0x00, 0x00, 0x0f, 0x40, 0x80, 0x7f, 0x00, 0x00, 0x00,],
/* 5 明 */[0x00, 0xfc, 0x44, 0x44, 0x44, 0xfc, 0x00, 0x00, 0xfe, 0x22, 0x22, 0x22, 0x22, 0xfe, 0x00, 0x00, 0x00, 0x0f, 0x04, 0x04, 0x04, 0x8f, 0x40, 0x30, 0x0f, 0x02, 0x02, 0x42, 0x82, 0x7f, 0x00, 0x00,],
/* 6 月 */[0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x21, 0x21, 0x21, 0x21, 0x21, 0x21, 0x21, 0xff, 0x00, 0x00, 0x00, 0x00, 0x80, 0x40, 0x30, 0x0f, 0x02, 0x02, 0x02, 0x02, 0x02, 0x42, 0x82, 0x7f, 0x00, 0x00,],
/* 7 光 */[0x40, 0x40, 0x42, 0x44, 0x58, 0xc0, 0x40, 0x7f, 0x40, 0xc0, 0x50, 0x48, 0x46, 0x40, 0x40, 0x00, 0x80, 0x80, 0x40, 0x20, 0x18, 0x07, 0x00, 0x00, 0x00, 0x3f, 0x40, 0x40, 0x40, 0x40, 0x78, 0x00,],
/* 8 ， */[0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2c, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,],
/* 9 疑 */[0x00, 0xdf, 0xa4, 0xa4, 0xa2, 0xba, 0x00, 0x22, 0x22, 0x2a, 0xf2, 0x2a, 0xa6, 0x62, 0x20, 0x00, 0x85, 0x44, 0x34, 0x0f, 0x14, 0x64, 0x84, 0x60, 0x1f, 0x10, 0x3f, 0x42, 0x42, 0x40, 0x40, 0x00,],
/* 10 是 */[0x00, 0x00, 0x00, 0x7f, 0x49, 0x49, 0x49, 0x49, 0x49, 0x49, 0x49, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x81, 0x41, 0x21, 0x1d, 0x21, 0x41, 0x81, 0xff, 0x89, 0x89, 0x89, 0x89, 0x89, 0x81, 0x81, 0x00,],
/* 11 地 */[0x20, 0x20, 0x20, 0xff, 0x20, 0x20, 0x80, 0xf8, 0x80, 0x40, 0xff, 0x20, 0x10, 0xf0, 0x00, 0x00, 0x10, 0x30, 0x10, 0x0f, 0x08, 0x08, 0x00, 0x3f, 0x40, 0x40, 0x5f, 0x42, 0x44, 0x43, 0x78, 0x00,],
/* 12 上 */[0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x00, 0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x7f, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00,],
/* 13 霜 */[0x10, 0x0c, 0x05, 0x55, 0x55, 0x55, 0x05, 0x7f, 0x05, 0x55, 0x55, 0x55, 0x05, 0x14, 0x0c, 0x00, 0x20, 0x12, 0x0a, 0x06, 0xff, 0x0a, 0x12, 0x00, 0xff, 0x55, 0x55, 0x55, 0x55, 0xff, 0x00, 0x00,],
/* 14 。 */[0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x24, 0x24, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,],
/* 15 举 */[0x10, 0x10, 0x91, 0x56, 0x30, 0x10, 0x11, 0xd6, 0x10, 0x10, 0x38, 0x54, 0x93, 0x10, 0x10, 0x00, 0x01, 0x09, 0x08, 0x08, 0x09, 0x09, 0x09, 0xff, 0x09, 0x09, 0x09, 0x08, 0x08, 0x09, 0x01, 0x00,],
/* 16 头 */[0x00, 0x00, 0x10, 0x60, 0x04, 0x18, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x81, 0x81, 0x41, 0x41, 0x21, 0x11, 0x09, 0x07, 0x01, 0x05, 0x09, 0x11, 0x21, 0xc1, 0x01, 0x00,],
/* 17 望 */[0x04, 0x04, 0xfc, 0x45, 0x46, 0x24, 0x24, 0x04, 0x80, 0x7e, 0x2a, 0xaa, 0x2a, 0xfe, 0x00, 0x00, 0x80, 0x82, 0x92, 0x92, 0x92, 0x92, 0x92, 0xff, 0x92, 0x92, 0x92, 0x92, 0x93, 0x82, 0x80, 0x00,],
/* 18 低 */[0x00, 0x80, 0x60, 0xf8, 0x07, 0x00, 0xfc, 0x84, 0x84, 0x84, 0xfe, 0x82, 0x83, 0x82, 0x80, 0x00, 0x01, 0x00, 0x00, 0xff, 0x00, 0x00, 0xff, 0x40, 0x20, 0x00, 0x41, 0x8e, 0x30, 0x40, 0xf8, 0x00,],
/* 19 故 */[0x10, 0x10, 0x10, 0xff, 0x10, 0x10, 0x50, 0x20, 0xd8, 0x17, 0x10, 0x10, 0xf0, 0x10, 0x10, 0x00, 0x00, 0x7f, 0x21, 0x21, 0x21, 0x7f, 0x80, 0x40, 0x21, 0x16, 0x08, 0x16, 0x21, 0x40, 0x80, 0x00,],
/* 20 乡 */[0x00, 0x00, 0x20, 0x30, 0x28, 0x24, 0xa3, 0x60, 0x20, 0x10, 0x0c, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x42, 0x42, 0x23, 0x22, 0x12, 0x0a, 0x06, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00,]
    ];
    let screen1024 = pins.createBuffer(1024);
    let _screen1025 = pins.createBuffer(1025);
    function getWordsIndex(str: string){
        let strMap = '静夜思床前明月光，疑似地上霜。举头望低故乡';
        let arrMap = strMap.split('');
        let arrStr = str.split('');
        let arrIndex = [];
        for (let i of arrStr) {
            for (let im of arrMap) {
                if (arrMap[parseInt(im)] == arrStr[parseInt(i)]) {
                    arrIndex.push(im);
                }
            }
        }
        return arrIndex;
    }
    /*
arr 字符串
posX 列，1~128
posY 行，1~4
*/
    function showWords2(arr: string[], posX = 1, posY = 1) {
        let line:number = 0;
        for (let ci of arr) {
            line = Math.floor(parseInt(ci) / 8);
            let iWordBankIndex = parseInt(arr[parseInt(ci)]);
            let cnt = arrWordBank[iWordBankIndex].length;
            let index = 0;
            for (let i = 0; i < 16; i++) {
                index = i;
                //字符换行，8字符
                index += 128 * line;
                //字模偏移，16x16
                index += parseInt(ci) * 16;
                //列偏移，128列
                index += (posX - 1) % 128;
                //行偏移，4行
                index += (posY - 1) * 256;
                //上半
                screen1024[index] = arrWordBank[iWordBankIndex][i];
                //下半
                screen1024[index + 128] = arrWordBank[iWordBankIndex][i + 16];
            }
        }
    }
    export function TestShowWords(){
        let arrIndex = getWordsIndex('明月光');
        showWords2(arrIndex);
        _screen1025[0] = 0x40; //64
        for (let i = 0; i < 1024; i++) {
           _screen1025[i + 1] = screen1024[i];
        }
        pins.i2cWriteBuffer(60, _screen1025);
        //mqlib.drawPicBy1024Hex(screen1024);
    }
}